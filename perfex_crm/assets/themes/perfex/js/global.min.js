function init_progress_bars(){setTimeout(function(){$(".progress .progress-bar").each(function(){var t=$(this),e=t.attr("data-percent"),a=0,i=setInterval(function(){a>=e?(clearInterval(i),0==e&&t.css("width","0%")):(a+=1,t.css("width",a+"%")),t.hasClass("no-percent-text")||t.text(a+"%")},10)})},300)}function init_color_pickers(){$("body").find(".colorpicker-input").colorpicker({format:"hex"})}function init_datepicker(){var t=$(".datepicker"),e=$(".datetimepicker");if(0!=e.length||0!=t.length){$.each(t,function(){var t={timepicker:!1,scrollInput:!1,lazyInit:!0,format:date_format,dayOfWeekStart:calendar_first_day},e=$(this).data("date-end-date"),a=$(this).data("date-min-date");e&&(t.maxDate=e),a&&(t.minDate=a),$(this).datetimepicker(t)});var a;$.each(e,function(){a={lazyInit:!0,scrollInput:!1,validateOnBlur:!1,dayOfWeekStart:calendar_first_day},24==time_format?a.format=date_format+" H:i":(a.format=date_format+" g:i A",a.formatTime="g:i A");var t=$(this).data("date-end-date"),e=$(this).data("date-min-date");t&&(a.maxDate=t),e&&(a.minDate=e),$(this).datetimepicker(a)})}}function is_mobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function alert_float(t,e){var a,i;a=$("body").find("float-alert").length,a="alert_float_"+ ++a,i=$('<div id="'+a+'" class="float-alert animated fadeInRight col-xs-11 col-sm-4 alert alert-'+t+'"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><span class="fa fa-bell-o" data-notify="icon"></span><span class="alert-title">'+e+"</span></div>"),$("body").append(i),setTimeout(function(){$("#"+a).hide("fast",function(){$("#"+a).remove()})},4e3)}function buildUrl(t,e){var a="";for(var i in e){var n=e[i];a+=encodeURIComponent(i)+"="+encodeURIComponent(n)+"&"}return a.length>0&&(t=t+"?"+(a=a.substring(0,a.length-1))),t}function fix_proposal_right_height(){var t=$(document).outerHeight(!0);$(".proposal-right").height(t+"px")}$(window).on("load resize",function(){fix_proposal_right_height()}),$.validator.setDefaults({highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"text-danger",errorPlacement:function(t,e){e.parent(".input-group").length||e.parents(".chk").length?e.parents(".chk").length?t.insertAfter(e.parents(".chk")):t.insertAfter(e.parent()):t.insertAfter(e)}}),$.validator.addMethod("filesize",function(t,e,a){return this.optional(e)||e.files[0].size<=a},file_exceeds_max_filesize),$.validator.addMethod("extension",function(t,e,a){return a="string"==typeof a?a.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp("\\.("+a+")$","i"))},$.validator.format(validation_extension_not_allowed)),$(function(){if($("body").find("select").selectpicker({showSubtext:!0}),init_progress_bars(),init_color_pickers(),jQuery.datetimepicker.setLocale(locale),init_datepicker(),$("body").tooltip({selector:'[data-toggle="tooltip"]'}),$("body").popover({selector:'[data-toggle="popover"]'}),$("body").on("click",function(t){$('[data-toggle="popover"]').each(function(){$(this).is(t.target)||0!==$(this).has(t.target).length||0!==$(".popover").has(t.target).length||$(this).popover("hide")})}),"undefined"!=typeof lightbox){var t={showImageNumberLabel:!1,resizeDuration:200};lightbox.option(t)}$("body").on("click","._delete",function(t){return 1==confirm(confirm_action_prompt)}),$('select[name="range"]').on("change",function(){var t=$(".period");"period"==$(this).val()?t.removeClass("hide"):(t.addClass("hide"),t.find("input").val(""))}),$(".article_useful_buttons button").on("click",function(t){t.preventDefault();var e={};e.answer=$(this).data("answer"),e.articleid=$('input[name="articleid"]').val(),$.post(site_url+"clients/add_kb_answer",e).done(function(t){1==(t=JSON.parse(t)).success&&$(this).focusout(),$(".answer_response").html(t.message)})}),$(".proposal-left table").wrap("<div class='table-responsive'></div>"),$("#identityConfirmationForm").validate({ignore:[],rules:{acceptance_firstname:"required",acceptance_lastname:"required",acceptance_email:{email:!0,required:!0}}}),$("body.identity-confirmation #accept_action").on("click",function(){var t=$("#identityConfirmationForm");return t.length&&!t.validate().checkForm()?$("#identityConfirmationModal").modal({show:!0,backdrop:"static",keyboard:!1}):($(this).prop("disabled",!0),t.submit()),!1}),$("body").on("click","[data-loading-text]",function(){var t=$(this).data("form");null!=t?$(t).valid()&&$(this).button("loading"):$(this).button("loading")}),$("#survey_form").validate();var e=$("#survey_form").find('[data-required="1"]');$.each(e,function(){$(this).rules("add",{required:!0});var t=$(this).data("for"),e=$(this).parents(".form-group").find('[for="'+t+'"]');e.length>0&&0==e.find(".req").length&&e.prepend(' <small class="req text-danger">* </small>')})});