!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(e){"use strict";function t(t){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return e.each(i,function(){t=t?t.replace(this.re,this.ch):""}),t}function i(t){var i=arguments,s=t;[].shift.apply(i);var n,o=this.each(function(){var t=e(this);if(t.is("select")){var o=t.data("selectpicker"),l="object"==typeof s&&s;if(o){if(l)for(var a in l)l.hasOwnProperty(a)&&(o.options[a]=l[a])}else{var r=e.extend({},c.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),l);r.template=e.extend({},c.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},t.data().template,l.template),t.data("selectpicker",o=new c(this,r))}"string"==typeof s&&(n=o[s]instanceof Function?o[s].apply(o,i):o.options[s])}});return void 0!==n?n:o}String.prototype.includes||function(){var e={}.toString,t=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),i="".indexOf,s=function(t){if(null==this)throw new TypeError;var s=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var n=s.length,o=String(t),l=o.length,a=arguments.length>1?arguments[1]:void 0,r=a?Number(a):0;return r!=r&&(r=0),!(l+Math.min(Math.max(r,0),n)>n)&&-1!=i.call(s,o,r)};t?t(String.prototype,"includes",{value:s,configurable:!0,writable:!0}):String.prototype.includes=s}(),String.prototype.startsWith||function(){var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),t={}.toString,i=function(e){if(null==this)throw new TypeError;var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var s=i.length,n=String(e),o=n.length,l=arguments.length>1?arguments[1]:void 0,a=l?Number(l):0;a!=a&&(a=0);var r=Math.min(Math.max(a,0),s);if(o+r>s)return!1;for(var d=-1;++d<o;)if(i.charCodeAt(r+d)!=n.charCodeAt(d))return!1;return!0};e?e(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(e,t,i){i=[];for(t in e)i.hasOwnProperty.call(e,t)&&i.push(t);return i});var s={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!s.useDefault&&e(t).data("selected",!0),s._set.apply(this,arguments)};var n=null,o=function(){try{return new Event("change"),!0}catch(e){return!1}}();e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?(o?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):i.fireEvent?(t=document.createEventObject(),t.eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)},e.expr.pseudos.icontains=function(t,i,s){var n=e(t).find("a");return(n.data("tokens")||n.text()).toString().toUpperCase().includes(s[3].toUpperCase())},e.expr.pseudos.ibegins=function(t,i,s){var n=e(t).find("a");return(n.data("tokens")||n.text()).toString().toUpperCase().startsWith(s[3].toUpperCase())},e.expr.pseudos.aicontains=function(t,i,s){var n=e(t).find("a");return(n.data("tokens")||n.data("normalizedText")||n.text()).toString().toUpperCase().includes(s[3].toUpperCase())},e.expr.pseudos.aibegins=function(t,i,s){var n=e(t).find("a");return(n.data("tokens")||n.data("normalizedText")||n.text()).toString().toUpperCase().startsWith(s[3].toUpperCase())};var l={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"},a=function(e){var t=function(t){return e[t]},i="(?:"+Object.keys(e).join("|")+")",s=RegExp(i),n=RegExp(i,"g");return function(e){return e=null==e?"":""+e,s.test(e)?e.replace(n,t):e}},r=a({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}),d=a(l),c=function(t,i){s.useDefault||(e.valHooks.select.set=s._set,s.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title"));var n=this.options.windowPadding;"number"==typeof n&&(this.options.windowPadding=[n,n,n,n]),this.val=c.prototype.val,this.render=c.prototype.render,this.refresh=c.prototype.refresh,this.setStyle=c.prototype.setStyle,this.selectAll=c.prototype.selectAll,this.deselectAll=c.prototype.deselectAll,this.destroy=c.prototype.destroy,this.remove=c.prototype.remove,this.show=c.prototype.show,this.hide=c.prototype.hide,this.init()};c.VERSION="1.12.4",c.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0},c.prototype={constructor:c,init:function(){var t=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==i&&(this.$button.attr("data-id",i),e('label[for="'+i+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!1),t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!0),t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),t.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){t.$button.addClass("bs-invalid"),t.$element.on({"focus.bs.select":function(){t.$button.focus(),t.$element.off("focus.bs.select")},"shown.bs.select":function(){t.$element.val(t.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&t.$button.removeClass("bs-invalid"),t.$element.off("rendered.bs.select")}}),t.$button.on("blur.bs.select",function(){t.$element.focus().blur(),t.$button.off("blur.bs.select")})}),setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",s=this.autofocus?" autofocus":"",n=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",o=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+r(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"",l=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",a=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",d='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+s+' role="button"><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open" role="combobox">'+n+o+l+'<ul class="dropdown-menu inner" role="listbox" aria-expanded="false"></ul>'+a+"</div></div>";return e(d)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){var e=this.createLi();this.$menuInner[0].innerHTML=e},createLi:function(){var i=this,s=[],n=0,o=document.createElement("option"),l=-1,a=function(e,t,i,s){return"<li"+(void 0!==i&&""!==i?' class="'+i+'"':"")+(void 0!==t&&null!==t?' data-original-index="'+t+'"':"")+(void 0!==s&&null!==s?'data-optgroup="'+s+'"':"")+">"+e+"</li>"},d=function(s,n,o,l){return'<a tabindex="0"'+(void 0!==n?' class="'+n+'"':"")+(o?' style="'+o+'"':"")+(i.options.liveSearchNormalize?' data-normalized-text="'+t(r(e(s).html()))+'"':"")+(void 0!==l||null!==l?' data-tokens="'+l+'"':"")+' role="option">'+s+'<span class="'+i.options.iconBase+" "+i.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(l--,!this.$element.find(".bs-title-option").length)){var c=this.$element[0];o.className="bs-title-option",o.innerHTML=this.options.title,o.value="",c.insertBefore(o,c.firstChild),void 0===e(c.options[c.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")&&(o.selected=!0)}var h=this.$element.find("option");return h.each(function(t){var o=e(this);if(l++,!o.hasClass("bs-title-option")){var c,p=this.className||"",u=r(this.style.cssText),g=o.data("content")?o.data("content"):o.html(),f=o.data("tokens")?o.data("tokens"):null,m=void 0!==o.data("subtext")?'<small class="text-muted">'+o.data("subtext")+"</small>":"",v=void 0!==o.data("icon")?'<span class="'+i.options.iconBase+" "+o.data("icon")+'"></span> ':"",b=o.parent(),$="OPTGROUP"===b[0].tagName,x=$&&b[0].disabled,y=this.disabled||x;if(""!==v&&y&&(v="<span>"+v+"</span>"),i.options.hideDisabled&&(y&&!$||x))return c=o.data("prevHiddenIndex"),o.next().data("prevHiddenIndex",void 0!==c?c:t),void l--;if(o.data("content")||(g=v+'<span class="text">'+g+m+"</span>"),$&&!0!==o.data("divider")){if(i.options.hideDisabled&&y){if(void 0===b.data("allOptionsDisabled")){var w=b.children();b.data("allOptionsDisabled",w.filter(":disabled").length===w.length)}if(b.data("allOptionsDisabled"))return void l--}var S=" "+b[0].className||"";if(0===o.index()){n+=1;var k=b[0].label,C=void 0!==b.data("subtext")?'<small class="text-muted">'+b.data("subtext")+"</small>":"";k=(b.data("icon")?'<span class="'+i.options.iconBase+" "+b.data("icon")+'"></span> ':"")+'<span class="text">'+r(k)+C+"</span>",0!==t&&s.length>0&&(l++,s.push(a("",null,"divider",n+"div"))),l++,s.push(a(k,null,"dropdown-header"+S,n))}if(i.options.hideDisabled&&y)return void l--;s.push(a(d(g,"opt "+p+S,u,f),t,"",n))}else if(!0===o.data("divider"))s.push(a("",t,"divider"));else if(!0===o.data("hidden"))c=o.data("prevHiddenIndex"),o.next().data("prevHiddenIndex",void 0!==c?c:t),s.push(a(d(g,p,u,f),t,"hidden is-hidden"));else{var O=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName;if(!O&&i.options.hideDisabled&&void 0!==(c=o.data("prevHiddenIndex"))){var E=h.eq(c)[0].previousElementSibling;E&&"OPTGROUP"===E.tagName&&!E.disabled&&(O=!0)}O&&(l++,s.push(a("",null,"divider",n+"div"))),s.push(a(d(g,p,u,f),t))}i.liObj[t]=l}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),s.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i,s=this,n=this.$element.find("option");!1!==t&&n.each(function(e){var t=s.findLis().eq(s.liObj[e]);s.setDisabled(e,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,t),s.setSelected(e,this.selected,t)}),this.togglePlaceholder(),this.tabIndex();var o=n.map(function(){if(this.selected){if(s.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var t,i=e(this),n=i.data("icon")&&s.options.showIcon?'<i class="'+s.options.iconBase+" "+i.data("icon")+'"></i> ':"";return t=s.options.showSubtext&&i.data("subtext")&&!s.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"",void 0!==i.attr("title")?i.attr("title"):i.data("content")&&s.options.showContent?i.data("content").toString():n+i.html()+t}}).toArray(),l=this.multiple?o.join(this.options.multipleSeparator):o[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var a=this.options.selectedTextFormat.split(">");if(a.length>1&&o.length>a[1]||1==a.length&&o.length>=2){i=this.options.hideDisabled?", [disabled]":"";var r=n.not('[data-divider="true"], [data-hidden="true"]'+i).length;l=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(o.length,r):this.options.countSelectedText).replace("{0}",o.length.toString()).replace("{1}",r.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(l=this.options.title),l||(l=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",d(e.trim(l.replace(/<[^>]*>?/g,"")))),this.$button.children(".filter-option").html(l),this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=e||this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(t){if(t||!1!==this.options.size&&!this.sizeInfo){var i=document.createElement("div"),s=document.createElement("div"),n=document.createElement("ul"),o=document.createElement("li"),l=document.createElement("li"),a=document.createElement("a"),r=document.createElement("span"),d=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,c=this.options.liveSearch?document.createElement("div"):null,h=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,p=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(r.className="text",i.className=this.$menu[0].parentNode.className+" open",s.className="dropdown-menu open",n.className="dropdown-menu inner",o.className="divider",r.appendChild(document.createTextNode("Inner text")),a.appendChild(r),l.appendChild(a),n.appendChild(l),n.appendChild(o),d&&s.appendChild(d),c){var u=document.createElement("input");c.className="bs-searchbox",u.className="form-control",c.appendChild(u),s.appendChild(c)}h&&s.appendChild(h),s.appendChild(n),p&&s.appendChild(p),i.appendChild(s),document.body.appendChild(i);var g=a.offsetHeight,f=d?d.offsetHeight:0,m=c?c.offsetHeight:0,v=h?h.offsetHeight:0,b=p?p.offsetHeight:0,$=e(o).outerHeight(!0),x="function"==typeof getComputedStyle&&getComputedStyle(s),y=x?null:e(s),w={vert:parseInt(x?x.paddingTop:y.css("paddingTop"))+parseInt(x?x.paddingBottom:y.css("paddingBottom"))+parseInt(x?x.borderTopWidth:y.css("borderTopWidth"))+parseInt(x?x.borderBottomWidth:y.css("borderBottomWidth")),horiz:parseInt(x?x.paddingLeft:y.css("paddingLeft"))+parseInt(x?x.paddingRight:y.css("paddingRight"))+parseInt(x?x.borderLeftWidth:y.css("borderLeftWidth"))+parseInt(x?x.borderRightWidth:y.css("borderRightWidth"))},S={vert:w.vert+parseInt(x?x.marginTop:y.css("marginTop"))+parseInt(x?x.marginBottom:y.css("marginBottom"))+2,horiz:w.horiz+parseInt(x?x.marginLeft:y.css("marginLeft"))+parseInt(x?x.marginRight:y.css("marginRight"))+2};document.body.removeChild(i),this.sizeInfo={liHeight:g,headerHeight:f,searchHeight:m,actionsHeight:v,doneButtonHeight:b,dividerHeight:$,menuPadding:w,menuExtras:S}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var t,i,s,n,o,l,a,r,d=this,c=this.$menu,h=this.$menuInner,p=e(window),u=this.$newElement[0].offsetHeight,g=this.$newElement[0].offsetWidth,f=this.sizeInfo.liHeight,m=this.sizeInfo.headerHeight,v=this.sizeInfo.searchHeight,b=this.sizeInfo.actionsHeight,$=this.sizeInfo.doneButtonHeight,x=this.sizeInfo.dividerHeight,y=this.sizeInfo.menuPadding,w=this.sizeInfo.menuExtras,S=this.options.hideDisabled?".disabled":"",k=function(){var t,i=d.$newElement.offset(),s=e(d.options.container);d.options.container&&!s.is("body")?(t=s.offset(),t.top+=parseInt(s.css("borderTopWidth")),t.left+=parseInt(s.css("borderLeftWidth"))):t={top:0,left:0};var n=d.options.windowPadding;o=i.top-t.top-p.scrollTop(),l=p.height()-o-u-t.top-n[2],a=i.left-t.left-p.scrollLeft(),r=p.width()-a-g-t.left-n[1],o-=n[0],a-=n[3]};if(k(),"auto"===this.options.size){var C=function(){var p,u=function(t,i){return function(s){return i?s.classList?s.classList.contains(t):e(s).hasClass(t):!(s.classList?s.classList.contains(t):e(s).hasClass(t))}},x=d.$menuInner[0].getElementsByTagName("li"),S=Array.prototype.filter?Array.prototype.filter.call(x,u("hidden",!1)):d.$lis.not(".hidden"),C=Array.prototype.filter?Array.prototype.filter.call(S,u("dropdown-header",!0)):S.filter(".dropdown-header");k(),t=l-w.vert,i=r-w.horiz,d.options.container?(c.data("height")||c.data("height",c.height()),s=c.data("height"),c.data("width")||c.data("width",c.width()),n=c.data("width")):(s=c.height(),n=c.width()),d.options.dropupAuto&&d.$newElement.toggleClass("dropup",o>l&&t-w.vert<s),d.$newElement.hasClass("dropup")&&(t=o-w.vert),"auto"===d.options.dropdownAlignRight&&c.toggleClass("dropdown-menu-right",a>r&&i-w.horiz<n-g),p=S.length+C.length>3?3*f+w.vert-2:0,c.css({"max-height":t+"px",overflow:"hidden","min-height":p+m+v+b+$+"px"}),h.css({"max-height":t-m-v-b-$-y.vert+"px","overflow-y":"auto","min-height":Math.max(p-y.vert,0)+"px"})};C(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",C),p.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",C)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(S).length>this.options.size){var O=this.$lis.not(".divider").not(S).children().slice(0,this.options.size).last().parent().index(),E=this.$lis.slice(0,O+1).filter(".divider").length;t=f*this.options.size+E*x+y.vert,d.options.container?(c.data("height")||c.data("height",c.height()),s=c.data("height")):s=c.height(),d.options.dropupAuto&&this.$newElement.toggleClass("dropup",o>l&&t-w.vert<s),c.css({"max-height":t+m+v+b+$+"px",overflow:"hidden","min-height":""}),h.css({"max-height":t-y.vert+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,i=e.children(".dropdown-menu").outerWidth(),s=t.css("width","auto").children("button").outerWidth();e.remove(),t.remove(),this.$newElement.css("width",Math.max(i,s)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,s,n=this,o=e(this.options.container),l=function(e){n.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),o.is("body")?i={top:0,left:0}:(i=o.offset(),i.top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),i.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),s=e.hasClass("dropup")?0:e[0].offsetHeight,n.$bsContainer.css({top:t.top-i.top+s,left:t.left-i.left,width:e[0].offsetWidth})};this.$button.on("click",function(){var t=e(this);n.isDisabled()||(l(n.$newElement),n.$bsContainer.appendTo(n.options.container).toggleClass("open",!t.hasClass("open")).append(n.$menu))}),e(window).on("resize scroll",function(){l(n.$newElement)}),this.$element.on("hide.bs.select",function(){n.$menu.data("height",n.$menu.height()),n.$bsContainer.detach()})},setSelected:function(e,t,i){i||(this.togglePlaceholder(),i=this.findLis().eq(this.liObj[e])),i.toggleClass("selected",t).find("a").attr("aria-selected",t)},setDisabled:function(e,t,i){i||(i=this.findLis().eq(this.liObj[e])),t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1).attr("aria-disabled",!0):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0).attr("aria-disabled",!1)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled").attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element.val();this.$button.toggleClass("bs-placeholder",null===e||""===e||e.constructor===Array&&0===e.length)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,i=e(document);i.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))}),this.$button.on("click",function(){t.setSize()}),this.$element.on("shown.bs.select",function(){if(t.options.liveSearch||t.multiple){if(!t.multiple){var e=t.liObj[t.$element[0].selectedIndex];if("number"!=typeof e||!1===t.options.size)return;var i=t.$lis.eq(e)[0].offsetTop-t.$menuInner[0].offsetTop;i=i-t.$menuInner[0].offsetHeight/2+t.sizeInfo.liHeight/2,t.$menuInner[0].scrollTop=i}}else t.$menuInner.find(".selected a").focus()}),this.$menuInner.on("click","li a",function(i){var s=e(this),o=s.parent().data("originalIndex"),l=t.$element.val(),a=t.$element.prop("selectedIndex"),r=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!s.parent().hasClass("disabled")){var d=t.$element.find("option"),c=d.eq(o),h=c.prop("selected"),p=c.parent("optgroup"),u=t.options.maxOptions,g=p.data("maxOptions")||!1;if(t.multiple){if(c.prop("selected",!h),t.setSelected(o,!h),s.blur(),!1!==u||!1!==g){var f=u<d.filter(":selected").length,m=g<p.find("option:selected").length;if(u&&f||g&&m)if(u&&1==u)d.prop("selected",!1),c.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected"),t.setSelected(o,!0);else if(g&&1==g){p.find("option:selected").prop("selected",!1),c.prop("selected",!0);var v=s.parent().data("optgroup");t.$menuInner.find('[data-optgroup="'+v+'"]').removeClass("selected"),t.setSelected(o,!0)}else{var b="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,$="function"==typeof b?b(u,g):b,x=$[0].replace("{n}",u),y=$[1].replace("{n}",g),w=e('<div class="notify"></div>');$[2]&&(x=x.replace("{var}",$[2][u>1?0:1]),y=y.replace("{var}",$[2][g>1?0:1])),c.prop("selected",!1),t.$menu.append(w),u&&f&&(w.append(e("<div>"+x+"</div>")),r=!1,t.$element.trigger("maxReached.bs.select")),g&&m&&(w.append(e("<div>"+y+"</div>")),r=!1,t.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){t.setSelected(o,!1)},10),w.delay(750).fadeOut(300,function(){e(this).remove()})}}}else d.prop("selected",!1),c.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected").find("a").attr("aria-selected",!1),t.setSelected(o,!0);!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.focus():t.options.liveSearch&&t.$searchbox.focus(),r&&(l!=t.$element.val()&&t.multiple||a!=t.$element.prop("selectedIndex")&&!t.multiple)&&(n=[o,c.prop("selected"),h],t.$element.triggerNative("change"))}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox.focus():t.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){t.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()}),this.$element.change(function(){t.render(!1),t.$element.trigger("changed.bs.select",n),n=null})},liveSearchListener:function(){var i=this,s=e('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api",function(){i.$menuInner.find(".active").removeClass("active"),i.$searchbox.val()&&(i.$searchbox.val(""),i.$lis.not(".is-hidden").removeClass("hidden"),s.parent().length&&s.remove()),i.multiple||i.$menuInner.find(".selected").addClass("active"),setTimeout(function(){i.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(i.$lis.not(".is-hidden").removeClass("hidden"),i.$lis.filter(".active").removeClass("active"),s.remove(),i.$searchbox.val()){var n,o=i.$lis.not(".is-hidden, .divider, .dropdown-header");if((n=i.options.liveSearchNormalize?o.not(":a"+i._searchStyle()+'("'+t(i.$searchbox.val())+'")'):o.not(":"+i._searchStyle()+'("'+i.$searchbox.val()+'")')).length===o.length)s.html(i.options.noneResultsText.replace("{0}",'"'+r(i.$searchbox.val())+'"')),i.$menuInner.append(s),i.$lis.addClass("hidden");else{n.addClass("hidden");var l,a=i.$lis.not(".hidden");a.each(function(t){var i=e(this);i.hasClass("divider")?void 0===l?i.addClass("hidden"):(l&&l.addClass("hidden"),l=i):i.hasClass("dropdown-header")&&a.eq(t+1).data("optgroup")!==i.data("optgroup")?i.addClass("hidden"):l=null}),l&&l.addClass("hidden"),o.not(".hidden").first().addClass("active"),i.$menuInner.scrollTop(0)}}})},_searchStyle:function(){return{begins:"ibegins",startsWith:"ibegins"}[this.options.liveSearchStyle]||"icontains"},val:function(e){return void 0!==e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},changeAll:function(t){if(this.multiple){void 0===t&&(t=!0),this.findLis();var i=this.$element.find("option"),s=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),n=s.length,o=[];if(t){if(s.filter(".selected").length===s.length)return}else if(0===s.filter(".selected").length)return;s.toggleClass("selected",t);for(var l=0;l<n;l++){var a=s[l].getAttribute("data-original-index");o[o.length]=i.eq(a)[0]}e(o).prop("selected",t),this.render(!1),this.togglePlaceholder(),this.$element.triggerNative("change")}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click")},keydown:function(t){var i,s,n,o,l=e(this),a=(l.is("input")?l.parent().parent():l.parent()).data("this"),r=":not(.disabled, .hidden, .dropdown-header, .divider)",d={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(!(o=a.$newElement.hasClass("open"))&&(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=105||t.keyCode>=65&&t.keyCode<=90))return a.options.container?a.$button.trigger("click"):(a.setSize(),a.$menu.parent().addClass("open"),o=!0),void a.$searchbox.focus();if(a.options.liveSearch&&/(^9$|27)/.test(t.keyCode.toString(10))&&o&&(t.preventDefault(),t.stopPropagation(),a.$menuInner.click(),a.$button.focus()),/(38|40)/.test(t.keyCode.toString(10))){if(!(i=a.$lis.filter(r)).length)return;s=a.options.liveSearch?i.index(i.filter(".active")):i.index(i.find("a").filter(":focus").parent()),n=a.$menuInner.data("prevIndex"),38==t.keyCode?(!a.options.liveSearch&&s!=n||-1==s||s--,s<0&&(s+=i.length)):40==t.keyCode&&((a.options.liveSearch||s==n)&&s++,s%=i.length),a.$menuInner.data("prevIndex",s),a.options.liveSearch?(t.preventDefault(),l.hasClass("dropdown-toggle")||(i.removeClass("active").eq(s).addClass("active").children("a").focus(),l.focus())):i.eq(s).children("a").focus()}else if(!l.is("input")){var c,h=[];(i=a.$lis.filter(r)).each(function(i){e.trim(e(this).children("a").text().toLowerCase()).substring(0,1)==d[t.keyCode]&&h.push(i)}),c=e(document).data("keycount"),c++,e(document).data("keycount",c),e.trim(e(":focus").text().toLowerCase()).substring(0,1)!=d[t.keyCode]?(c=1,e(document).data("keycount",c)):c>=h.length&&(e(document).data("keycount",0),c>h.length&&(c=1)),i.eq(h[c-1]).children("a").focus()}if((/(13|32)/.test(t.keyCode.toString(10))||/(^9$)/.test(t.keyCode.toString(10))&&a.options.selectOnTab)&&o){if(/(32)/.test(t.keyCode.toString(10))||t.preventDefault(),a.options.liveSearch)/(32)/.test(t.keyCode.toString(10))||(a.$menuInner.find(".active a").click(),l.focus());else{var p=e(":focus");p.click(),p.focus(),t.preventDefault(),e(document).data("spaceSelect",!0)}e(document).data("keycount",0)}(/(^9$|27)/.test(t.keyCode.toString(10))&&o&&(a.multiple||a.options.liveSearch)||/(27)/.test(t.keyCode.toString(10))&&!o)&&(a.$menu.parent().removeClass("open"),a.options.container&&a.$newElement.removeClass("open"),a.$button.focus())},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var h=e.fn.selectpicker;e.fn.selectpicker=i,e.fn.selectpicker.Constructor=c,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=h,this},e(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',c.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load.bs.select.data-api",function(){e(".selectpicker").each(function(){var t=e(this);i.call(t,t.data())})})}(e)}),function(e,t){var i=function(i,s){var n,o,l=this;s=s||{},this.$element=e(i),this.options=e.extend(!0,{},e.fn.ajaxSelectPicker.defaults,s),this.LOG_ERROR=1,this.LOG_WARNING=2,this.LOG_INFO=3,this.LOG_DEBUG=4,this.lastRequest=!1,this.previousQuery="",this.query="",this.request=!1;var a=[{from:"ajaxResultsPreHook",to:"preprocessData"},{from:"ajaxSearchUrl",to:{ajax:{url:"{{{value}}}"}}},{from:"ajaxOptions",to:"ajax"},{from:"debug",to:function(t){var i={};i.log=Boolean(l.options[t.from])?l.LOG_DEBUG:0,l.options=e.extend(!0,{},l.options,i),delete l.options[t.from],l.log(l.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i)}},{from:"mixWithCurrents",to:"preserveSelected"},{from:"placeHolderOption",to:{locale:{emptyTitle:"{{{value}}}"}}}];a.length&&e.map(a,function(t){if(l.options[t.from])if(e.isPlainObject(t.to))l.replaceValue(t.to,"{{{value}}}",l.options[t.from]),l.options=e.extend(!0,{},l.options,t.to),l.log(l.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',t.to),delete l.options[t.from];else if(e.isFunction(t.to))t.to.apply(l,[t]);else{var i={};i[t.to]=l.options[t.from],l.options=e.extend(!0,{},l.options,i),l.log(l.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i),delete l.options[t.from]}});var r=this.$element.data();r.searchUrl&&(l.log(l.LOG_WARNING,'Deprecated attribute name: "data-search-url". Update markup to use: \' data-abs-ajax-url="'+r.searchUrl+"\" '"),this.options.ajax.url=r.searchUrl);var d=function(e,t,i){var s=[].concat(e),n=s.length,o=i||{};if(n){var l=s.shift();o[l]=d(s,t,o[l])}return n?o:t},c=Object.keys(r).filter(/./.test.bind(new RegExp("^abs[A-Z]")));if(c.length){var h={},p=["locale"];for(n=0,o=c.length;n<o;n++){var u=c[n].replace(/^abs([A-Z])/,function(e,t){return t.toLowerCase()}).replace(/([A-Z])/g,"-$1").toLowerCase(),g=u.split("-");if(g[0]&&g.length>1&&-1!==p.indexOf(g[0])){for(var f=[g.shift()],m="",v=0;v<g.length;v++)m+=0===v?g[v]:g[v].charAt(0).toUpperCase()+g[v].slice(1);f.push(m),g=f}this.log(this.LOG_DEBUG,'Processing data attribute "data-abs-'+u+'":',r[c[n]]),d(g,r[c[n]],h)}this.options=e.extend(!0,{},this.options,h),this.log(this.LOG_DEBUG,"Merged in the data attribute options: ",h,this.options)}if(this.selectpicker=r.selectpicker,!this.selectpicker)return this.log(this.LOG_ERROR,"Cannot instantiate an AjaxBootstrapSelect instance without selectpicker first being initialized!"),null;if(!this.options.ajax.url)return this.log(this.LOG_ERROR,'Option "ajax.url" must be set! Options:',this.options),null;if(this.locale=e.extend(!0,{},e.fn.ajaxSelectPicker.locale),this.options.langCode=this.options.langCode||t.navigator.userLanguage||t.navigator.language||"en",!this.locale[this.options.langCode]){var b=this.options.langCode;this.options.langCode="en";var $=b.split("-");for(n=0,o=$.length;n<o;n++){var x=$.join("-");if(x.length&&this.locale[x]){this.options.langCode=x;break}$.pop()}this.log(this.LOG_WARNING,'Unknown langCode option: "'+b+'". Using the following langCode instead: "'+this.options.langCode+'".')}this.locale[this.options.langCode]=e.extend(!0,{},this.locale[this.options.langCode],this.options.locale),this.list=new t.AjaxBootstrapSelectList(this),this.list.refresh(),setTimeout(function(){l.init()},500)};i.prototype.init=function(){var i,s=this;this.options.preserveSelected&&this.selectpicker.$menu.off("click",".actions-btn").on("click",".actions-btn",function(t){s.selectpicker.options.liveSearch?s.selectpicker.$searchbox.focus():s.selectpicker.$button.focus(),t.preventDefault(),t.stopPropagation(),e(this).is(".bs-select-all")?(null===s.selectpicker.$lis&&(s.selectpicker.$lis=s.selectpicker.$menu.find("li")),s.$element.find("option:enabled").prop("selected",!0),e(s.selectpicker.$lis).not(".disabled").addClass("selected"),s.selectpicker.render()):(null===s.selectpicker.$lis&&(s.selectpicker.$lis=s.selectpicker.$menu.find("li")),s.$element.find("option:enabled").prop("selected",!1),e(s.selectpicker.$lis).not(".disabled").removeClass("selected"),s.selectpicker.render()),s.selectpicker.$element.change()}),this.selectpicker.$searchbox.attr("placeholder",this.t("searchPlaceholder")).off("input propertychange"),this.selectpicker.$searchbox.on(this.options.bindEvent,function(n){var o=s.selectpicker.$searchbox.val();if(s.log(s.LOG_DEBUG,'Bind event fired: "'+s.options.bindEvent+'", keyCode:',n.keyCode,n),s.options.cache||(s.options.ignoredKeys[13]="enter"),s.options.ignoredKeys[n.keyCode])s.log(s.LOG_DEBUG,"Key ignored.");else if(o.length<s.options.minLength)s.list.setStatus(s.t("statusTooShort"));else if(clearTimeout(i),o.length||(s.options.clearOnEmpty&&s.list.destroy(),s.options.emptyRequest)){if(s.previousQuery=s.query,s.query=o,s.options.cache&&13!==n.keyCode){var l=s.list.cacheGet(s.query);if(l)return s.list.setStatus(l.length?"":s.t("statusNoResults")),s.list.replaceOptions(l),void s.log(s.LOG_INFO,"Rebuilt options from cached data.")}i=setTimeout(function(){s.lastRequest&&s.lastRequest.jqXHR&&e.isFunction(s.lastRequest.jqXHR.abort)&&s.lastRequest.jqXHR.abort(),s.request=new t.AjaxBootstrapSelectRequest(s),s.request.jqXHR.always(function(){s.lastRequest=s.request,s.request=!1})},s.options.requestDelay||300)}})},i.prototype.log=function(e,i){if(t.console&&this.options.log){if("number"!=typeof this.options.log)switch("string"==typeof this.options.log&&(this.options.log=this.options.log.toLowerCase()),this.options.log){case!0:case"debug":this.options.log=this.LOG_DEBUG;break;case"info":this.options.log=this.LOG_INFO;break;case"warn":case"warning":this.options.log=this.LOG_WARNING;break;default:case!1:case"error":this.options.log=this.LOG_ERROR}if(e<=this.options.log){var s=[].slice.apply(arguments,[2]);switch(e){case this.LOG_DEBUG:e="debug";break;case this.LOG_INFO:e="info";break;case this.LOG_WARNING:e="warn";break;default:case this.LOG_ERROR:e="error"}var n="["+e.toUpperCase()+"] AjaxBootstrapSelect:";"string"==typeof i?s.unshift(n+" "+i):(s.unshift(i),s.unshift(n)),t.console[e].apply(t.console,s)}}},i.prototype.replaceValue=function(t,i,s,n){var o=this;n=e.extend({recursive:!0,depth:!1,limit:!1},n),e.each(t,function(l,a){return!(!1!==n.limit&&"number"==typeof n.limit&&n.limit<=0)&&void(e.isArray(t[l])||e.isPlainObject(t[l])?(n.recursive&&!1===n.depth||n.recursive&&"number"==typeof n.depth&&n.depth>0)&&o.replaceValue(t[l],i,s,n):a===i&&(!1!==n.limit&&"number"==typeof n.limit&&n.limit--,t[l]=s))})},i.prototype.t=function(e,t){return t=t||this.options.langCode,this.locale[t]&&this.locale[t].hasOwnProperty(e)?this.locale[t][e]:(this.log(this.LOG_WARNING,"Unknown translation key:",e),e)},t.AjaxBootstrapSelect=t.AjaxBootstrapSelect||i;var s=function(t){var i=this;this.$status=e(t.options.templates.status).hide().appendTo(t.selectpicker.$menu);var s=t.t("statusInitialized");s&&s.length&&this.setStatus(s),this.cache={},this.plugin=t,this.selected=[],this.title=null,this.selectedTextFormat=t.selectpicker.options.selectedTextFormat;var n=[];t.$element.find("option").each(function(){var i=e(this),s=i.attr("value");n.push({value:s,text:i.text(),class:i.attr("class")||"",data:i.data()||{},preserved:t.options.preserveSelected,selected:!!i.attr("selected")})}),this.cacheSet("",n),t.options.preserveSelected&&(i.selected=n,t.$element.on("change.abs.preserveSelected",function(s){var n=t.$element.find(":selected");i.selected=[],t.selectpicker.multiple||(n=n.last()),n.each(function(){var t=e(this),s=t.attr("value");i.selected.push({value:s,text:t.text(),class:t.attr("class")||"",data:t.data()||{},preserved:!0,selected:!0})}),i.replaceOptions(i.cacheGet(i.plugin.query))}))};s.prototype.build=function(t){var i,s,n=t.length,o=e("<select/>"),l=e("<optgroup/>").attr("label",this.plugin.t("currentlySelected"));for(this.plugin.log(this.plugin.LOG_DEBUG,"Building the select list options from data:",t),s=0;s<n;s++){var a=t[s],r=e("<option/>").appendTo(a.preserved?l:o);if(a.hasOwnProperty("divider"))r.attr("data-divider","true");else{r.val(a.value).text(a.text).attr("title",a.text),a.class.length&&r.attr("class",a.class),a.disabled&&r.attr("disabled",!0),a.selected&&!this.plugin.selectpicker.multiple&&o.find(":selected").prop("selected",!1),a.selected&&r.attr("selected",!0);for(i in a.data)a.data.hasOwnProperty(i)&&r.attr("data-"+i,a.data[i])}}l.find("option").length&&l["before"===this.plugin.options.preserveSelectedPosition?"prependTo":"appendTo"](o);var d=o.html();return this.plugin.log(this.plugin.LOG_DEBUG,d),d},s.prototype.cacheGet=function(e,t){var i=this.cache[e]||t;return this.plugin.log(this.LOG_DEBUG,"Retrieving cache:",e,i),i},s.prototype.cacheSet=function(e,t){this.cache[e]=t,this.plugin.log(this.LOG_DEBUG,"Saving to cache:",e,t)},s.prototype.destroy=function(){this.replaceOptions(),this.plugin.list.setStatus(),this.plugin.log(this.plugin.LOG_DEBUG,"Destroyed select list.")},s.prototype.refresh=function(e){this.plugin.selectpicker.$menu.css("minHeight",0),this.plugin.selectpicker.$menu.find("> .inner").css("minHeight",0);var t=this.plugin.t("emptyTitle");!this.plugin.$element.find("option").length&&t&&t.length?this.setTitle(t):(this.title||"static"!==this.selectedTextFormat&&this.selectedTextFormat!==this.plugin.selectpicker.options.selectedTextFormat)&&this.restoreTitle(),this.plugin.selectpicker.refresh(),this.plugin.selectpicker.findLis(),e&&(this.plugin.log(this.plugin.LOG_DEBUG,"Triggering Change"),this.plugin.$element.trigger("change.$")),this.plugin.log(this.plugin.LOG_DEBUG,"Refreshed select list.")},s.prototype.replaceOptions=function(e){var t,i,s,n="",o=[],l=[],a=[];if(e=e||[],this.selected&&this.selected.length){for(this.plugin.log(this.plugin.LOG_INFO,"Processing preserved selections:",this.selected),i=(l=[].concat(this.selected,e)).length,t=0;t<i;t++)(s=l[t]).hasOwnProperty("value")&&-1===a.indexOf(s.value+"")?(a.push(s.value+""),o.push(s)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring.");e=o}e.length&&(n=this.plugin.list.build(e)),this.plugin.$element.html(n),this.refresh(),this.plugin.log(this.plugin.LOG_DEBUG,"Replaced options with data:",e)},s.prototype.restore=function(){var e=this.plugin.list.cacheGet(this.plugin.previousQuery);return e&&this.plugin.list.replaceOptions(e)&&this.plugin.log(this.plugin.LOG_DEBUG,"Restored select list to the previous query: ",this.plugin.previousQuery),this.plugin.log(this.plugin.LOG_DEBUG,"Unable to restore select list to the previous query:",this.plugin.previousQuery),!1},s.prototype.restoreTitle=function(){this.plugin.request||(this.plugin.selectpicker.options.selectedTextFormat=this.selectedTextFormat,this.title?this.plugin.$element.attr("title",this.title):this.plugin.$element.removeAttr("title"),this.title=null)},s.prototype.setTitle=function(e){this.plugin.request||(this.title=this.plugin.$element.attr("title"),this.plugin.selectpicker.options.selectedTextFormat="static",this.plugin.$element.attr("title",e))},s.prototype.setStatus=function(e){(e=e||"").length?this.$status.html(e).show():this.$status.html("").hide()},t.AjaxBootstrapSelectList=t.AjaxBootstrapSelectList||s;var n=function(t){var i,s=this,n=["beforeSend","success","error","complete"],o=n.length;for(this.plugin=t,this.options=e.extend(!0,{},t.options.ajax),this.callbacks={},i=0;i<o;i++){var l=n[i];this.options[l]&&e.isFunction(this.options[l])&&(this.callbacks[l]=this.options[l]),this.options[l]=function(e){return function(){s.plugin.log(s.plugin.LOG_INFO,"Invoking AjaxBootstrapSelectRequest."+e+" callback:",arguments),s[e].apply(s,arguments),s.callbacks[e]&&(s.plugin.log(s.plugin.LOG_INFO,"Invoking ajax."+e+" callback:",arguments),s.callbacks[e].apply(s,arguments))}}(l)}this.options.data&&e.isFunction(this.options.data)&&(this.options.data=this.options.data.apply(this)||{q:"{{{q}}}"}),this.plugin.replaceValue(this.options.data,"{{{q}}}",this.plugin.query),this.jqXHR=e.ajax(this.options)};n.prototype.beforeSend=function(e){this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("statusSearching"))},n.prototype.complete=function(e,t){if("abort"!==t){var i=this.plugin.list.cacheGet(this.plugin.query);if(i){if(!i.length)return this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("statusNoResults")),void this.plugin.log(this.plugin.LOG_INFO,"No results were returned.");this.plugin.list.setStatus()}this.plugin.list.refresh(!0)}},n.prototype.error=function(e,t,i){"abort"!==t&&(this.plugin.list.cacheSet(this.plugin.query),this.plugin.options.clearOnError&&this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("errorText")),this.plugin.options.restoreOnError&&(this.plugin.list.restore(),this.plugin.list.setStatus()))},n.prototype.process=function(t){var i,s,n,o,l,a,r=[],d=[];if(this.plugin.log(this.plugin.LOG_INFO,"Processing raw data for:",this.plugin.query,t),l=t,e.isFunction(this.plugin.options.preprocessData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking preprocessData callback:",this.plugin.options.processData),void 0!==(n=this.plugin.options.preprocessData.apply(this,[l]))&&null!==n&&!1!==n&&(l=n)),!e.isArray(l))return this.plugin.log(this.plugin.LOG_ERROR,'The data returned is not an Array. Use the "preprocessData" callback option to parse the results and construct a proper array for this plugin.',l),!1;for(s=l.length,i=0;i<s;i++)o=l[i],this.plugin.log(this.plugin.LOG_DEBUG,"Processing item:",o),e.isPlainObject(o)&&(o.hasOwnProperty("divider")||o.hasOwnProperty("data")&&e.isPlainObject(o.data)&&o.data.divider?(this.plugin.log(this.plugin.LOG_DEBUG,"Item is a divider, ignoring provided data."),r.push({divider:!0})):o.hasOwnProperty("value")?-1===d.indexOf(o.value+"")?(d.push(o.value+""),o=e.extend({text:o.value,class:"",data:{},disabled:!1,selected:!1},o),r.push(o)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring."):this.plugin.log(this.plugin.LOG_DEBUG,'Data item must have a "value" property, skipping.'));if(a=[].concat(r),e.isFunction(this.plugin.options.processData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking processData callback:",this.plugin.options.processData),void 0!==(n=this.plugin.options.processData.apply(this,[a]))&&null!==n&&!1!==n)){if(!e.isArray(n))return this.plugin.log(this.plugin.LOG_ERROR,"The processData callback did not return an array.",n),!1;a=n}return this.plugin.list.cacheSet(this.plugin.query,a),this.plugin.log(this.plugin.LOG_INFO,"Processed data:",a),a},n.prototype.success=function(t,i,s){if(!e.isArray(t)&&!e.isPlainObject(t))return this.plugin.log(this.plugin.LOG_ERROR,"Request did not return a JSON Array or Object.",t),void this.plugin.list.destroy();var n=this.process(t);this.plugin.list.replaceOptions(n)},t.AjaxBootstrapSelectRequest=t.AjaxBootstrapSelectRequest||n,e.fn.ajaxSelectPicker=function(i){return this.each(function(){e(this).data("AjaxBootstrapSelect")||e(this).data("AjaxBootstrapSelect",new t.AjaxBootstrapSelect(this,i))})},e.fn.ajaxSelectPicker.locale={},e.fn.ajaxSelectPicker.defaults={ajax:{url:null,type:"POST",dataType:"json",data:{q:"{{{q}}}"}},minLength:0,bindEvent:"keyup",cache:!0,clearOnEmpty:!0,clearOnError:!0,emptyRequest:!1,ignoredKeys:{9:"tab",16:"shift",17:"ctrl",18:"alt",27:"esc",37:"left",39:"right",38:"up",40:"down",91:"meta"},langCode:null,locale:null,log:"error",preprocessData:function(){},preserveSelected:!0,preserveSelectedPosition:"after",processData:function(){},requestDelay:300,restoreOnError:!1,templates:{status:'<div class="status"></div>'}},e.fn.ajaxSelectPicker.locale["en-US"]={currentlySelected:"Currently Selected",emptyTitle:"Select and begin typing",errorText:"Unable to retrieve results",searchPlaceholder:"Search...",statusInitialized:"Start typing a search query",statusNoResults:"No Results",statusSearching:"Searching...",statusTooShort:"Please enter more characters"},e.fn.ajaxSelectPicker.locale.en=e.fn.ajaxSelectPicker.locale["en-US"]}(jQuery,window);